<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>osite</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>
</head>

<body>
    <!--Title-->
    <h1 style="margin: 0px;">welcome to my website i</h1>
    <nav style="margin-bottom: 20px;">
        <a href="index.html">Main Page</a> | <a href="calcs.html">Calculators</a> | <a href="games.html">Games</a>
    </nav>
    <!--<p id="currentTime"></p>-->
    <h3>daily derivitive (day 1):</h3>
    <h2 id="equation"></h2>

    <script>
        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min)) + min;
        }

        /*
        

        function randomConstant() {
            while (true) {
                if (Math.random() > 0.5) {
                    var n = getRandomInt(-20, 25);
                    if (n != 0 && n != 1) {
                        return n;
                    }
                } else {
                    return special[getRandomInt(0, special.length)]
                }
            }
        }

        var eq = "";

        //p can be funcs or constants, r is only for translating operators
        //sqrt[n] chooses a random number for n
        const funcs = ["root", "\\sin({phrase})", "\\cos({phrase})", "\\tan({phrase})", "\\frac{phrase}{phrase}", "\\ln({phrase})"]
        const operators = ["+phrase", "-phrase", "*phrase", "^{phrase}", "e^{phrase}"]
        const special = ["\\pi", "e"];

        //a "phrase" is anything in the tables.
        function replace(phrase, array) {
            var newPhrase = array[getRandomInt(0, array.length)]

            if (array == "constant") {
                const pIndex = phrase.indexOf("phrase");

                return phrase.slice(0, pIndex) + randomConstant() + phrase.slice(pIndex + 6);
            } else if (array == funcs) {
                const pIndex = phrase.indexOf("phrase");

                if (newPhrase == "root") {
                    var root = getRandomInt(1, 8);
                    newPhrase = "\\sqrt[" + getRandomInt(1, 8) + "]{phrase}";
                }

                return phrase.slice(0, pIndex) + newPhrase + replace(newPhrase, operators) + phrase.slice(pIndex + 6);
            } else if (array == operators) {
                return phrase + newPhrase;
            }
        }

        function parse(phrase, depth) {
            if (!phrase.includes("phrase")) return phrase;

            if (depth < 1) {
                phrase = replace(phrase, funcs);
            } else {
                phrase = replace(phrase, "constant");
            }

            console.log(phrase);
            return parse(phrase, depth + 1);
        }

        eq = funcs[getRandomInt(0, funcs.length)] + operators[getRandomInt(0, operators.length)];

        */

        
        //imma call these phrases ok
        const functions = [
            "\\sqrt{abc}",
            "\\sin(abc)",
            "\\cos(abc)"
        ];
        const operators = [
            "abc+xyz",
            "abc-xyz",
            "abc*xyz",
            "\\frac{abc}{xyz}",
            "{abc}^{xyz}"
        ];
        const constants = ["\\pi", "e"];

        function getRandom(dict) {
            const values = Object.values(dict);
            return "{" + values[getRandomInt(0, values.length)] + "}";
        }

        //first layer of arrays goes to operators only.
        //first layer: [operator[abc]] (functions or constants in abc)
        //next array in first layer goes into the xyz of the last.
        
        //[
        //    [operator[abc][xyz], [abc's function or constant]],
        //    [operator[abc][xyz], [abc's function or constant]],
        //    [xyz of last function (pick a functon or constant)]
        //]
        
        
        var equation = [
            ["abc+xyz", "2"],
            ["abc+xyz", ["\\sqrt{abc}", ["\\sin(abc)", "x"]]],
            ["\\frac{abc}{xyz}", ["\\cos(abc)", "x"]],
            ["{abc}^{xyz}", ["\\cos(abc)", "x"]],
            ["\\frac{abc}{xyz}", "x"],
            ["\\sin(abc)", "x"]
        ];


        //Array.isArray(variable)

        //var equationString = "";
        
        function go(array) {
            array.forEach(phraseArray => {
                var result = "";
                if (Array.isArray(phraseArray[1])) {
                    go(phraseArray[1]);
                } else {
                    var newString = phraseArray[0];
                    console.log("------------")
                    console.log(typeof phraseArray)
                    console.log(phraseArray)
                    console.log(phraseArray[0])
                    console.log(phraseArray[1])
                    //console.log(newString);
                    newString = newString.replace("abc", phraseArray[1]);
                    console.log(newString)
                    equationString += newString;
                }
            });
        }


const equationString = go(equation);
console.log(equationString);

// â†’ 2+\sqrt{\sin(x)}+\frac{\cos(x)}{{\cos(x)}^{\frac{x}{\sin(x)}}}



        document.getElementById("equation").innerHTML = "\\(\\frac{d}{dx}" + equationString + "\\)";
        MathJax.typesetPromise();
    </script>
</body>

</html>